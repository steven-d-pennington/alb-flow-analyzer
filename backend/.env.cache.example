# Cache Configuration for ALB Flow Analyzer
# Copy this file to .env.local and adjust values as needed

# Cache Type: 'memory', 'redis', or 'hybrid' (recommended: 'hybrid' for dev, 'redis' for production)
CACHE_TYPE=hybrid

# Redis Configuration (required for 'redis' and 'hybrid' cache types)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_KEY_PREFIX=alb:

# Memory Cache Configuration
MEMORY_CACHE_MAX_SIZE=10000    # Maximum number of items in memory
MEMORY_CACHE_MAX_AGE=300       # Default TTL in seconds (5 minutes)
MEMORY_CACHE_CHECK_PERIOD=60   # Cleanup interval in seconds

# Cache Settings
CACHE_DEFAULT_TTL=300           # Default TTL in seconds (5 minutes)
CACHE_ENABLE_COMPRESSION=true  # Enable compression for large objects
CACHE_COMPRESSION_THRESHOLD=1024  # Compress objects larger than 1KB
CACHE_ENABLE_METRICS=true      # Enable cache metrics collection

# Cache Strategies (TTL values in seconds)
CACHE_TTL_REALTIME=120         # 2 minutes for real-time data
CACHE_TTL_STANDARD=300         # 5 minutes for standard queries
CACHE_TTL_ANALYSIS=600         # 10 minutes for analysis results
CACHE_TTL_AGGREGATED=1800      # 30 minutes for aggregated data
CACHE_TTL_REFERENCE=3600       # 1 hour for reference data
CACHE_TTL_STATIC=86400         # 24 hours for static data

# Cache Warmup Settings
CACHE_WARMUP_ENABLED=true      # Enable cache warming
CACHE_WARMUP_CONCURRENCY=3     # Max concurrent warmup operations
CACHE_WARMUP_INTERVAL=300000   # Warmup interval in milliseconds (5 minutes)

# Cache Monitoring Settings
CACHE_MONITORING_ENABLED=true  # Enable cache monitoring
CACHE_MONITORING_INTERVAL=30000  # Monitoring interval in milliseconds (30 seconds)
CACHE_HIT_RATE_WARNING=0.7     # Hit rate warning threshold (70%)
CACHE_HIT_RATE_CRITICAL=0.5    # Hit rate critical threshold (50%)
CACHE_MEMORY_WARNING=80        # Memory usage warning threshold (80%)
CACHE_MEMORY_CRITICAL=95       # Memory usage critical threshold (95%)
CACHE_LATENCY_WARNING=100      # Latency warning threshold in milliseconds
CACHE_LATENCY_CRITICAL=500     # Latency critical threshold in milliseconds

# Cache Invalidation Settings
CACHE_INVALIDATION_BATCH_SIZE=1000    # Records to process before invalidating
CACHE_INVALIDATION_CLEANUP_INTERVAL=60000  # Cleanup interval in milliseconds (1 minute)

# Performance Tuning for 2M+ Records
CACHE_LARGE_DATASET_MODE=true         # Enable optimizations for large datasets
CACHE_EVICTION_POLICY=lru             # LRU eviction for memory management
CACHE_MAX_MEMORY_USAGE=512            # Max memory usage in MB
CACHE_PRELOAD_CRITICAL_QUERIES=true   # Preload critical queries on startup

# Development vs Production Settings
# For Development:
# - Use 'memory' or 'hybrid' cache type
# - Lower TTL values for faster testing
# - Disable compression for faster debugging
# 
# For Production:
# - Use 'redis' cache type
# - Higher TTL values for better performance  
# - Enable compression to save memory
# - Use Redis cluster for high availability